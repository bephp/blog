
<div>
<div tal:condition="isset($user)">
<h1 tal:content="isset($post) ? 'Edit Post' : 'Create Post'">Create Post</h1>
<hr />
<form method="POST">
  <input type="hidden" name="user_id" tal:value="$user->id" />
  <label for="title">Title</label>
  <input type="text" name="title" tal:value="isset($post)?$post->title:''" />
  <br />
  <label for="content">Content</label>
  <textarea name="content" tal:content="isset($post)?$post->content:''"></textarea>
  <br />
  <label for="tag">Tags</label>
  <input type="text" name="tag" tal:value="isset($post)?implode(', ', $post->getTags()):''" />
  <input type="submit" name="submit" value="submit" />
</form>
</div>
<div tal:condition="!isset($user)">
  <h1 tal:content="$post->title">View Post</h1>
  <hr />
  <pre tal:content="$post->content"></pre>
  <span tal:content="'Post by: '. $post->author->name"></span>
  <a tal:href="'/post/'. $post->id. '/edit'">Edit</a>
  <a tal:href="'/post/'. $post->id. '/delete'">Delete</a>
  <br />
  <b>Tags:</b>
  <span tal:repeat="$post->tags as $i=>$tag">
    <a tal:href="'/tag/'. $tag->tag->id. '/post'" tal:content="$tag->tag->name"></a>
  </span>
</div>
<hr />
<a href="/posts">Home</a>
<a href="/tags">Tags</a>
</div>
